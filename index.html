<!DOCTYPE html><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FinzoTalk</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDKWlkEcCskaGVMU4BZbE1LMR6HlhkCnz8",
  authDomain: "stock-portfolio-web-final.firebaseapp.com",
  projectId: "stock-portfolio-web-final",
  storageBucket: "stock-portfolio-web-final.appspot.com",
  messagingSenderId: "804419033716",
  appId: "1:804419033716:web:ad50c042cc663acb528f21"
};
firebase.initializeApp(firebaseConfig);
</script>

<style>
body {
  margin: 0;
  font-family: Inter, sans-serif;
  background: #f5f7fb;
}
header {
  background: #fff;
  padding: 12px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
nav span {
  margin-right: 15px;
  cursor: pointer;
  font-weight: 600;
}
.active {
  color: #4a90e2;
}
.container {
  padding: 20px;
}
.card {
  background: #fff;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 12px;
}
.stock-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.inline-form {
  margin-top: 10px;
}
.inline-form input {
  width: 48%;
  padding: 8px;
  margin-right: 2%;
}
.inline-form button {
  margin-top: 8px;
}
button {
  background: #4a90e2;
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
}
.delete {
  background: #e74c3c;
}
.hidden {
  display: none;
}
input {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
#loginBox {
  max-width: 360px;
  margin: 60px auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox">
  <h2>FinzoTalk Login</h2>
  <input id="email" placeholder="Email" style="width:100%;margin-bottom:10px;"><br>
  <input id="password" type="password" placeholder="Password" style="width:100%;margin-bottom:10px;"><br>
  <button onclick="loginEmail()" style="width:100%">Login / Signup</button><br><br>
  <button onclick="loginGoogle()" style="width:100%">Login with Google</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<header>
  <strong>FinzoTalk</strong>
  <nav>
    <span class="active" onclick="showTab('stocks')">Stocks</span>
    <span onclick="showTab('holdings')">Holdings</span>
  </nav>
</header>

<div class="container">

<!-- SEARCH -->
<input id="search" placeholder="Search stocks..." style="width:100%;margin-bottom:15px;" onkeyup="renderStocks()">

<!-- STOCKS -->
<div id="stocksTab"></div>

<!-- HOLDINGS -->
<div id="holdingsTab" class="hidden"></div>

</div>
</div>

<script>
const auth = firebase.auth();

function loginGoogle() {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider);
}
function loginEmail() {
  auth.signInWithEmailAndPassword(email.value, password.value)
  .catch(()=>auth.createUserWithEmailAndPassword(email.value, password.value));
}
auth.onAuthStateChanged(user=>{
  if(user){
    loginBox.classList.add("hidden");
    app.classList.remove("hidden");
  }
});
</script>

<script>
const topStocks = ["RELIANCE","TCS","INFY","HDFC","ICICIBANK"];
const allStocks = [
  "RELIANCE","TCS","INFY","HDFC","ICICIBANK","SBIN","ITC",
  "LT","AXISBANK","KOTAKBANK","ASIANPAINT","MARUTI","HUL","BHARTIARTL"
];

let holdings = JSON.parse(localStorage.getItem("holdings")) || [];

function showTab(tab){
  stocksTab.classList.toggle("hidden", tab!=="stocks");
  holdingsTab.classList.toggle("hidden", tab!=="holdings");
  document.querySelectorAll("nav span").forEach(s=>s.classList.remove("active"));
  event.target.classList.add("active");
}

function renderStocks(){
  const q = search.value.toUpperCase();
  stocksTab.innerHTML="";
  const list = q ? allStocks.filter(s=>s.includes(q)) : topStocks;
  list.forEach(stock=>{
    stocksTab.innerHTML += `
    <div class="card">
      <div class="stock-row">
        <strong>${stock}</strong>
        <button onclick="showForm('${stock}')">Add</button>
      </div>
      <div id="form-${stock}" class="inline-form hidden">
        <input placeholder="Buy Price" id="p-${stock}">
        <input placeholder="Qty" id="q-${stock}">
        <button onclick="addHolding('${stock}')">Confirm</button>
        <button class="delete" onclick="hideForm('${stock}')">Cancel</button>
      </div>
    </div>`;
  });
}

function showForm(s){ document.getElementById("form-"+s).classList.remove("hidden"); }
function hideForm(s){ document.getElementById("form-"+s).classList.add("hidden"); }

function addHolding(s){
  holdings.push({
    name:s,
    price:+document.getElementById("p-"+s).value,
    qty:+document.getElementById("q-"+s).value
  });
  localStorage.setItem("holdings",JSON.stringify(holdings));
  hideForm(s);
  renderHoldings();
}

function renderHoldings(){
  holdingsTab.innerHTML="";
  holdings.forEach((h,i)=>{
    holdingsTab.innerHTML+=`
    <div class="card">
      <strong>${h.name}</strong><br>
      Buy: ₹${h.price} | Qty: ${h.qty}<br>
      Total: ₹${h.price*h.qty}<br><br>
      <button class="delete" onclick="deleteHolding(${i})">Delete</button>
    </div>`;
  });
}

function deleteHolding(i){
  holdings.splice(i,1);
  localStorage.setItem("holdings",JSON.stringify(holdings));
  renderHoldings();
}

renderStocks();
renderHoldings();
</script>

</body>
</html>


